<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    .left-pane {
      width: 250px;
      min-width: 250px;
    }
    .right-pane {
      flex: 1;
    }
    .whatsapp-link {
      color: #25D366;
    }
    .summary-row {
      border-bottom: 1px solid #dee2e6;
      padding: 0.25rem 0;
    }
    .summary-row:last-child {
      border-bottom: none;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container-fluid h-100">
    <div class="row h-100">
      <!-- Left Pane -->
      <div class="col-auto left-pane bg-light p-3">
        <h5 class="mb-3">Order Details</h5>
        
        <!-- Order ID -->
        <div class="mb-2">
          <label class="form-label small">Order ID</label>
          <input type="text" class="form-control form-control-sm" id="orderId" placeholder="Enter order ID">
        </div>
        
        <!-- Client Search -->
        <div class="mb-2">
          <label class="form-label small">Client</label>
          <input type="text" class="form-control form-control-sm" id="clientSearch" placeholder="Search client">
        </div>
        
        <!-- Location -->
        <div class="mb-2">
          <label class="form-label small">Location</label>
          <input type="text" class="form-control form-control-sm" id="location" placeholder="Construction site address">
        </div>
        
        <!-- Notes -->
        <div class="mb-2">
          <label class="form-label small">Notes</label>
          <textarea class="form-control form-control-sm" id="notes" rows="2" placeholder="Order notes"></textarea>
        </div>
        
        <!-- Phone with WhatsApp -->
        <div class="mb-2">
          <label class="form-label small">Client Phone</label>
          <div class="input-group input-group-sm">
            <input type="tel" class="form-control" id="clientPhone" placeholder="Phone number">
            <button class="btn btn-outline-success" type="button" id="whatsappBtn">
              <i class="bi bi-whatsapp"></i>
            </button>
          </div>
        </div>
        
        <!-- Contact Person -->
        <div class="mb-2">
          <label class="form-label small">Contact Person</label>
          <input type="text" class="form-control form-control-sm" id="contactPerson" placeholder="Contact name">
        </div>
        
        <!-- Due Date -->
        <div class="mb-3">
          <label class="form-label small">Due Date</label>
          <input type="datetime-local" class="form-control form-control-sm" id="dueDate">
        </div>
        
        <!-- Document Buttons -->
        <div class="mb-3">
          <label class="form-label small">Documents</label>
          <div class="btn-group-vertical w-100" role="group">
            <button type="button" class="btn btn-outline-primary btn-sm">Waybill</button>
            <button type="button" class="btn btn-outline-primary btn-sm">Invoice</button>
            <button type="button" class="btn btn-outline-primary btn-sm">Invoice EU</button>
            <button type="button" class="btn btn-outline-primary btn-sm">Receipt</button>
            <button type="button" class="btn btn-outline-secondary btn-sm">Draft</button>
            <button type="button" class="btn btn-outline-info btn-sm">Bill</button>
            <button type="button" class="btn btn-outline-warning btn-sm">P1</button>
            <button type="button" class="btn btn-outline-warning btn-sm">P2</button>
          </div>
        </div>
        
        <!-- Summary -->
        <div class="mb-3">
          <label class="form-label small">Summary</label>
          <div class="border rounded p-2 bg-white">
            <div class="summary-row d-flex justify-content-between">
              <span>Total:</span>
              <span id="totalAmount">€0.00</span>
            </div>
            <div class="summary-row d-flex justify-content-between">
              <span>Tax 21%:</span>
              <span id="tax21">€0.00</span>
            </div>
            <div class="summary-row d-flex justify-content-between">
              <span>Tax 0%:</span>
              <span id="tax0">€0.00</span>
            </div>
            <div class="summary-row d-flex justify-content-between">
              <span>Total with Tax:</span>
              <span id="totalWithTax">€0.00</span>
            </div>
          </div>
        </div>
        
        <!-- Save Button -->
        <button type="button" class="btn btn-success w-100" id="saveOrder">
          <i class="bi bi-save"></i> Save Order
        </button>
      </div>
      
      <!-- Right Pane -->
      <div class="col right-pane p-3">
        <h5 class="mb-3">Client Information</h5>
        
        <div class="row">
          <div class="col-md-6">
            <!-- Client Type -->
            <div class="mb-3">
              <label class="form-label">Client Type</label>
              <div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="clientType" id="fizANM" value="fizANM">
                  <label class="form-check-label" for="fizANM">Fiziskā ANM</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="clientType" id="fiz" value="fiz">
                  <label class="form-check-label" for="fiz">Fiziskā</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="clientType" id="jurANM" value="jurANM">
                  <label class="form-check-label" for="jurANM">Juridiskā ANM</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="clientType" id="jur" value="jur">
                  <label class="form-check-label" for="jur">Juridiskā</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="clientType" id="jurFor" value="jurFor">
                  <label class="form-check-label" for="jurFor">Juridiskā Ārzemes</label>
                </div>
              </div>
            </div>
            
            <!-- Phone -->
            <div class="mb-3">
              <label class="form-label">Phone Number</label>
              <input type="tel" class="form-control" id="phone" placeholder="Phone number">
            </div>
            
            <!-- Bank Info -->
            <div class="mb-3">
              <label class="form-label">Bank Name & Account</label>
              <input type="text" class="form-control" id="bankInfo" placeholder="Bank name and account">
            </div>
            
            <!-- Registration Number -->
            <div class="mb-3">
              <label class="form-label">Registration Number</label>
              <input type="text" class="form-control" id="regNumber" placeholder="Registration number">
            </div>
            
            <!-- VAT Number -->
            <div class="mb-3">
              <label class="form-label">VAT Number</label>
              <input type="text" class="form-control" id="vatNumber" placeholder="VAT number">
            </div>
          </div>
          
          <div class="col-md-6">
            <!-- Registration Address -->
            <div class="mb-3">
              <label class="form-label">Registration Address</label>
              <textarea class="form-control" id="regAddress" rows="3" placeholder="Registration address"></textarea>
            </div>
            
            <!-- Internal Note -->
            <div class="mb-3">
              <label class="form-label">Internal Note</label>
              <textarea class="form-control" id="internalNote" rows="2" placeholder="Internal note"></textarea>
            </div>
            
            <!-- Email -->
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="email" placeholder="Email address">
            </div>
          </div>
        </div>
        
        <!-- Company Drivers -->
        <div class="mb-4">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <label class="form-label">Company Drivers</label>
            <button type="button" class="btn btn-outline-primary btn-sm" id="addDriver">
              <i class="bi bi-plus"></i> Add Driver
            </button>
          </div>
          <div id="driversList" class="border rounded p-2">
            <!-- Dynamic driver entries will be added here -->
          </div>
        </div>
        
        <!-- Construction Addresses -->
        <div class="mb-4">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <label class="form-label">Construction Addresses</label>
            <button type="button" class="btn btn-outline-primary btn-sm" id="addAddress">
              <i class="bi bi-plus"></i> Add Address
            </button>
          </div>
          <div id="addressesList" class="border rounded p-2">
            <!-- Dynamic address entries will be added here -->
          </div>
        </div>
        
        <!-- Save Button -->
        <button type="button" class="btn btn-success" id="saveClient">
          <i class="bi bi-save"></i> Save Client Information
        </button>
      </div>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    class OrderManager {
      constructor() {
        this.initEventListeners();
        this.driverCount = 0;
        this.addressCount = 0;
      }
      
      initEventListeners() {
        // WhatsApp button
        document.getElementById('whatsappBtn').addEventListener('click', () => {
          const phone = document.getElementById('clientPhone').value;
          if (phone) {
            window.open(`https://wa.me/${phone.replace(/\D/g, '')}`, '_blank');
          }
        });
        
        // Add driver
        document.getElementById('addDriver').addEventListener('click', () => {
          this.addDriverEntry();
        });
        
        // Add address
        document.getElementById('addAddress').addEventListener('click', () => {
          this.addAddressEntry();
        });
        
        // Save order
        document.getElementById('saveOrder').addEventListener('click', () => {
          this.saveOrder();
        });
        
        // Save client
        document.getElementById('saveClient').addEventListener('click', () => {
          this.saveClient();
        });
      }
      
      addDriverEntry() {
        const driversList = document.getElementById('driversList');
        const driverId = `driver_${this.driverCount++}`;
        
        const driverEntry = document.createElement('div');
        driverEntry.className = 'mb-2 p-2 border rounded';
        driverEntry.innerHTML = `
          <div class="row g-2">
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="Car reg company">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="Company reg number">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="Driver name">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="Code">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="Car plates">
            </div>
            <div class="col-md-3">
              <input type="text" class="form-control form-control-sm" placeholder="Car model">
            </div>
            <div class="col-md-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="${driverId}_waybill">
                <label class="form-check-label small" for="${driverId}_waybill">Can collect waybills</label>
              </div>
            </div>
            <div class="col-md-3">
              <button type="button" class="btn btn-outline-danger btn-sm" onclick="this.parentElement.parentElement.parentElement.remove()">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </div>
        `;
        driversList.appendChild(driverEntry);
      }
      
      addAddressEntry() {
        const addressesList = document.getElementById('addressesList');
        
        const addressEntry = document.createElement('div');
        addressEntry.className = 'mb-2 p-2 border rounded';
        addressEntry.innerHTML = `
          <div class="d-flex gap-2">
            <input type="text" class="form-control form-control-sm" placeholder="Construction address">
            <button type="button" class="btn btn-outline-danger btn-sm" onclick="this.parentElement.parentElement.remove()">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        `;
        addressesList.appendChild(addressEntry);
      }
      
      saveOrder() {
        // Collect order data
        const orderData = {
          orderId: document.getElementById('orderId').value,
          client: document.getElementById('clientSearch').value,
          location: document.getElementById('location').value,
          notes: document.getElementById('notes').value,
          clientPhone: document.getElementById('clientPhone').value,
          contactPerson: document.getElementById('contactPerson').value,
          dueDate: document.getElementById('dueDate').value
        };
        
        console.log('Saving order:', orderData);
        alert('Order saved successfully!');
      }
      
      saveClient() {
        // Collect client data
        const clientType = document.querySelector('input[name="clientType"]:checked')?.value;
        const clientData = {
          type: clientType,
          phone: document.getElementById('phone').value,
          bankInfo: document.getElementById('bankInfo').value,
          regNumber: document.getElementById('regNumber').value,
          vatNumber: document.getElementById('vatNumber').value,
          regAddress: document.getElementById('regAddress').value,
          internalNote: document.getElementById('internalNote').value,
          email: document.getElementById('email').value
        };
        
        console.log('Saving client:', clientData);
        alert('Client information saved successfully!');
      }
    }
    
    // Initialize the application
    document.addEventListener('DOMContentLoaded', () => {
      new OrderManager();
    });
  </script>
</body>
</html></button>